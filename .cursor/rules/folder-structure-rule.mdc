---
alwaysApply: true
---
# Dot War Game - Folder Structure Rules

## ğŸ“ Cáº¥u trÃºc thÆ° má»¥c chuáº©n

```
dot-war/
â”œâ”€â”€ core/           # Core game logic
â”œâ”€â”€ managers/       # Manager classes
â”œâ”€â”€ utils/          # Utility classes & functions
â”œâ”€â”€ ui/             # UI components
â”œâ”€â”€ entities/       # Game entities
â”œâ”€â”€ constants/      # Constants
â””â”€â”€ types/          # TypeScript types
```

## ğŸ¯ Quy táº¯c phÃ¢n loáº¡i file

### 1. **`core/` - Core Game Logic**
**Chá»©a:** CÃ¡c file cá»‘t lÃµi cá»§a game, khÃ´ng thá»ƒ thiáº¿u

**Bao gá»“m:**
- `GameScene.ts` - Scene chÃ­nh cá»§a game (Phaser Scene)
- `GameCanvas.tsx` - React component wrapper cho game
- CÃ¡c file core khÃ¡c náº¿u cáº§n

**Quy táº¯c:**
- Chá»‰ chá»©a file thá»±c sá»± cáº§n thiáº¿t cho core game logic
- KhÃ´ng chá»©a utility functions hoáº·c manager classes
- Tá»‘i Ä‘a 2-3 file trong thÆ° má»¥c nÃ y

### 2. **`managers/` - Manager Classes**
**Chá»©a:** CÃ¡c class quáº£n lÃ½ state vÃ  logic phá»©c táº¡p

**Bao gá»“m:**
- `PowerUpManager.ts` - Quáº£n lÃ½ power-ups
- `GameWorld.ts` - Quáº£n lÃ½ world state (obstacles, spawn points)
- `PlayerManager.ts` - Quáº£n lÃ½ players vÃ  bot AI
- `BulletManager.ts` - Quáº£n lÃ½ bullets vÃ  collision
- CÃ¡c manager khÃ¡c cho game systems

**Quy táº¯c:**
- TÃªn file pháº£i káº¿t thÃºc báº±ng `Manager.ts`
- Má»—i manager chá»‰ quáº£n lÃ½ má»™t domain cá»¥ thá»ƒ
- KhÃ´ng chá»©a utility functions Ä‘Æ¡n giáº£n
- CÃ³ thá»ƒ cÃ³ dependencies vá»›i nhau

### 3. **`utils/` - Utility Classes & Functions**
**Chá»©a:** CÃ¡c helper functions vÃ  utility classes

**Bao gá»“m:**
- `GameState.ts` - Quáº£n lÃ½ game state (survival time, pause, etc.)
- `GameInput.ts` - Xá»­ lÃ½ input handling
- `playerUtils.ts` - Utility functions cho players
- `powerUpEffects.ts` - Effects cho power-ups
- `effects.ts` - Visual effects
- `botUtils.ts` - Bot utility functions

**Quy táº¯c:**
- TÃªn file utility functions pháº£i káº¿t thÃºc báº±ng `Utils.ts`
- TÃªn file utility classes pháº£i cÃ³ prefix rÃµ rÃ ng (Game, Player, etc.)
- Má»—i file chá»‰ chá»©a functions/classes liÃªn quan Ä‘áº¿n má»™t domain
- KhÃ´ng chá»©a complex business logic

### 4. **`ui/` - UI Components**
**Chá»©a:** CÃ¡c React components vÃ  UI managers

**Bao gá»“m:**
- `GameUI.ts` - Game UI manager (Phaser UI)
- `DotWarMenu.tsx` - Menu component
- `DotWarGuide.tsx` - Guide component
- CÃ¡c UI components khÃ¡c

**Quy táº¯c:**
- React components pháº£i cÃ³ extension `.tsx`
- Phaser UI managers pháº£i cÃ³ extension `.ts`
- TÃªn file pháº£i mÃ´ táº£ rÃµ chá»©c nÄƒng UI
- KhÃ´ng chá»©a business logic phá»©c táº¡p

### 5. **`entities/` - Game Entities**
**Chá»©a:** CÃ¡c game objects vÃ  entities

**Bao gá»“m:**
- `Player.ts` - Player entity
- `Bullet.ts` - Bullet entity
- `PowerUp.ts` - Power-up entity
- CÃ¡c entities khÃ¡c

**Quy táº¯c:**
- TÃªn file pháº£i lÃ  tÃªn cá»§a entity (sá»‘ Ã­t)
- Má»—i file chá»‰ chá»©a má»™t entity class
- Entity pháº£i extend tá»« Phaser.GameObjects hoáº·c tÆ°Æ¡ng tá»±
- KhÃ´ng chá»©a manager logic

### 6. **`constants/` - Constants**
**Chá»©a:** CÃ¡c háº±ng sá»‘ vÃ  configuration

**Bao gá»“m:**
- `constants.ts` - Game constants
- CÃ¡c file config khÃ¡c náº¿u cáº§n

**Quy táº¯c:**
- Táº¥t cáº£ constants pháº£i Ä‘Æ°á»£c export
- Sá»­ dá»¥ng UPPER_SNAKE_CASE cho constant names
- NhÃ³m constants theo chá»©c nÄƒng

### 7. **`types/` - TypeScript Types**
**Chá»©a:** Type definitions vÃ  interfaces

**Bao gá»“m:**
- `types.ts` - Game types vÃ  interfaces
- CÃ¡c file types khÃ¡c náº¿u cáº§n

**Quy táº¯c:**
- Sá»­ dá»¥ng PascalCase cho interface/type names
- NhÃ³m types theo domain
- Export táº¥t cáº£ types cáº§n thiáº¿t

## ğŸ”„ Quy táº¯c Import/Export

### Import Paths
```typescript
// âœ… ÄÃºng
import { PlayerManager } from '../managers/PlayerManager';
import { GameState } from '../utils/GameState';
import { Player } from '../entities/Player';

// âŒ Sai
import { PlayerManager } from './PlayerManager';
import { GameState } from './GameState';
```

### Export Rules
```typescript
// âœ… ÄÃºng - Named exports
export class PlayerManager { }
export function updateScore() { }
export const PLAYER_SPEED = 200;

// âœ… ÄÃºng - Default export cho main classes
export default class GameScene { }

// âŒ Sai - Mixed default/named exports
export default { PlayerManager, GameState };
```

## ğŸ“ Naming Conventions

### Files
- **Manager classes**: `*Manager.ts`
- **Utility functions**: `*Utils.ts`
- **Entities**: `EntityName.ts` (PascalCase)
- **React components**: `ComponentName.tsx`
- **Constants**: `constants.ts`
- **Types**: `types.ts`

### Classes
- **Manager classes**: `GameManager`, `PlayerManager`
- **Entity classes**: `Player`, `Bullet`, `PowerUp`
- **Utility classes**: `GameState`, `GameInput`

### Functions
- **Utility functions**: `camelCase`
- **Event handlers**: `handle*` prefix
- **Async functions**: `async*` prefix

### Variables
- **Constants**: `UPPER_SNAKE_CASE`
- **Variables**: `camelCase`
- **Private members**: `_camelCase`

## ğŸš« Anti-patterns

### KhÃ´ng Ä‘Æ°á»£c lÃ m:
1. **Äáº·t file sai thÆ° má»¥c**
   ```typescript
   // âŒ Sai - PlayerManager trong core/
   core/PlayerManager.ts
   
   // âœ… ÄÃºng - PlayerManager trong managers/
   managers/PlayerManager.ts
   ```

2. **Import sai path**
   ```typescript
   // âŒ Sai
   import { PlayerManager } from './PlayerManager';
   
   // âœ… ÄÃºng
   import { PlayerManager } from '../managers/PlayerManager';
   ```

3. **Táº¡o file khÃ´ng theo naming convention**
   ```typescript
   // âŒ Sai
   player-manager.ts
   PlayerManager.tsx
   
   // âœ… ÄÃºng
   PlayerManager.ts
   ```

4. **Trá»™n láº«n concerns**
   ```typescript
   // âŒ Sai - UI logic trong manager
   class PlayerManager {
     createUI() { }
   }
   
   // âœ… ÄÃºng - TÃ¡ch riÃªng
   class PlayerManager { }
   class GameUI { }
   ```

## âœ… Checklist khi táº¡o file má»›i

- [ ] File Ä‘Æ°á»£c Ä‘áº·t Ä‘Ãºng thÆ° má»¥c theo chá»©c nÄƒng
- [ ] TÃªn file tuÃ¢n theo naming convention
- [ ] Import paths sá»­ dá»¥ng relative paths Ä‘Ãºng
- [ ] Export/import sá»­ dá»¥ng named exports
- [ ] KhÃ´ng cÃ³ circular dependencies
- [ ] File chá»‰ chá»©a logic thuá»™c domain cá»§a nÃ³
- [ ] TypeScript types Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a rÃµ rÃ ng

## ğŸ”§ Migration Rules

Khi refactor code cÅ©:
1. **KhÃ´ng xÃ³a file cÅ©** cho Ä‘áº¿n khi Ä‘Ã£ test ká»¹
2. **Táº¡o file má»›i** á»Ÿ Ä‘Ãºng vá»‹ trÃ­
3. **Cáº­p nháº­t imports** trong táº¥t cáº£ files liÃªn quan
4. **Test thoroughly** trÆ°á»›c khi xÃ³a file cÅ©
5. **Update documentation** náº¿u cáº§n

## ğŸ“š Examples

### Táº¡o Manager má»›i
```typescript
// managers/SoundManager.ts
export class SoundManager {
  // Sound management logic
}
```

### Táº¡o Utility má»›i
```typescript
// utils/soundUtils.ts
export function playSound(soundName: string) { }
export function stopSound(soundName: string) { }
```

### Táº¡o Entity má»›i
```typescript
// entities/Explosion.ts
export class Explosion extends Phaser.GameObjects.Sprite {
  // Explosion entity logic
}
```

---

**LÆ°u Ã½:** TuÃ¢n thá»§ cÃ¡c quy táº¯c nÃ y sáº½ giÃºp code dá»… maintain, scale vÃ  collaborate trong team. 